_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"1Mxj":function(e,t,r){"use strict";r("q1tI");var n=r("AeFk");var a={name:"3goe6e",styles:"margin-top:5rem;text-align:center"};t.a=function(){return Object(n.b)("div",null,Object(n.b)("h1",{css:a},"No se puede mostrar"))}},G58V:function(e,t,r){"use strict";r.r(t);var n=r("rePB"),a=r("a3WO");var o=r("BsWD");function c(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=r("o0o1"),s=r.n(i),u=r("HaE+"),l=r("DZdY"),b=r("q1tI"),d=r.n(b),m=r("20a2"),p=r("iHBO"),f=r("1Mxj"),g=r("zgwX"),j=r("oWvv"),O=r.n(j),h=r("PSO/"),x=r("oJAI"),y=r("bIyw"),v=r("XIub"),w=r.n(v),k=r("AeFk");function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=Object(l.a)("div",{target:"e1s4jho61",label:"ContenedorProducto"})({name:"bkbgmm",styles:"@media(min-width: 768px){display:grid;grid-template-columns:2fr 1fr;gap:2rem;}"}),_=Object(l.a)("p",{target:"e1s4jho60",label:"CreadorProducto"})({name:"1ptknkn",styles:"padding:.5rem 2rem;background-color:#DA552F;color:#fff;text-transform:uppercase;font-weight:bold;display:inline-block;text-align:center"}),I={name:"1azakc",styles:"text-align:center"},A={name:"5yl01g",styles:"margin-top:5rem"},C={name:"1efi8gv",styles:"font-weight:bold"},D={name:"1b2e6c8",styles:"border:1px solid #e1e1e1;padding:2rem"},N={name:"k82dzb",styles:"margin:2rem 0"},z={name:"craf4i",styles:"text-align:center;margin-top:5rem"};t.default=function(){var e=Object(m.useRouter)(),t=e.query.id,r=Object(b.useContext)(p.a),a=r.firebase,o=r.usuario,i=Object(b.useState)({}),l=i[0],j=i[1],v=Object(b.useState)(!1),P=v[0],F=v[1],V=Object(b.useState)({}),T=V[0],q=V[1],J=Object(b.useState)(!0),X=J[0],B=J[1],W=w()(),G=l.comentarios,H=l.creado,M=l.descripcion,Q=l.empresa,U=l.nombre,Y=l.url,Z=l.imagenUrl,R=l.votos,K=l.creador,L=l.haVotado,$=l.imagePath;if(Object(b.useEffect)((function(){t&&X&&function(){var e=Object(u.a)(s.a.mark((function e(){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.db.collection("productos").doc(t);case 2:return r=e.sent,e.next=5,r.get();case 5:(n=e.sent).exists||W()?(j(n.data()),B(!1),F(!1)):(B(!1),F(!0));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();W(!1)}),[t,l,W]),0===Object.keys(l).length&&!P)return"Cargando...";var ee=function(){var r=Object(u.a)(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o){r.next=2;break}return r.abrupt("return",e.push("/login"));case 2:if(K.id===o.uid){r.next=4;break}return r.abrupt("return",e.push("/"));case 4:return r.prev=4,r.next=7,a.db.collection("productos").doc(t).delete();case 7:return r.next=9,a.storage.ref("productos/".concat($)).delete();case 9:e.push("/"),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(4),console.log(r.t0);case 15:case"end":return r.stop()}}),r,null,[[4,12]])})));return function(){return r.apply(this,arguments)}}();return Object(k.b)(g.a,null,Object(k.b)(d.a.Fragment,null,P?Object(k.b)(f.a,null):Object(k.b)("div",{className:"contenedor"},Object(k.b)("h1",{css:z},U),Object(k.b)(E,null,Object(k.b)("div",null,Object(k.b)("p",null,"Publicado hace: ",O()(new Date(H),{locale:h.es})),Object(k.b)("p",null,"Por: ",K.nombre," de ",Q),Object(k.b)("img",{src:Z,alt:"img"}),Object(k.b)("p",null,M),o&&Object(k.b)(d.a.Fragment,null,Object(k.b)("h2",null,"Agrega tu comentario"),Object(k.b)("form",{onSubmit:function(r){if(r.preventDefault(),!o)return e.push("/login");if(""!==T.mensaje.trim()){T.usuarioId=o.uid,T.usuarioNombre=o.displayName;var n=[].concat(c(G),[T]);a.db.collection("productos").doc(t).update({comentarios:n}),j(S(S({},l),{},{comentarios:n})),B(!0)}}},Object(k.b)(x.a,null,Object(k.b)("input",{type:"text",name:"mensaje",onChange:function(e){q(S(S({},T),{},Object(n.a)({},e.target.name,e.target.value)))}})),Object(k.b)(x.d,{type:"submit",value:"Agregar comentario"}))),Object(k.b)("h2",{css:N},"Comentarios"),0===G.length?"A\xfan no hay comentarios":Object(k.b)("ul",null,G.map((function(e,t){return Object(k.b)("li",{key:"".concat(e.usuarioId,"-").concat(t),css:D},Object(k.b)("p",null,Object(k.b)("span",{css:C},e.usuarioNombre," "),"comento:"),Object(k.b)("p",null,e.mensaje),function(e){if(K.id===e)return!0}(e.usuarioId)&&Object(k.b)(_,null,"Es Creador"))})))),Object(k.b)("aside",null,Object(k.b)(y.a,{target:"_blank",bgColor:"true",href:Y},"Visitar Url"),Object(k.b)("div",{css:A},Object(k.b)("p",{css:I},R," votos"),o&&!function(e){return L.some((function(t){return t===e}))}(o.uid)&&Object(k.b)(y.a,{onClick:function(){if(!o)return e.push("/login");if(null===L||void 0===L||!L.includes(o.uid)){var r=R+1,n=[].concat(c(L),[o.uid]);a.db.collection("productos").doc(t).update({votos:r,haVotado:n}),j(S(S({},l),{},{votos:r})),B(!0)}}},"Votar")))),!!o&&(K.id===o.uid||void 0)&&Object(k.b)(y.a,{onClick:ee},"Eliminar Producto"))))}},oJAI:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return i}));var n=r("DZdY");var a=Object(n.a)("form",{target:"ejn641k3",label:"Formulario"})({name:"1ul61nn",styles:"max-width:600px;width:95%;margin:5rem auto 0 auto;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:2rem;padding:2rem;}@media(max-width: 450px){min-width:300px;max-width:350px;margin-top:2rem;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:1.4rem;padding:2rem;max-width:360px;}}"}),o=Object(n.a)("div",{target:"ejn641k2",label:"Campo"})({name:"s3wco",styles:"margin-bottom:2rem;display:flex;align-items:center;label{flex:0 0 150px;font-size:1.1rem;}input,textarea{flex:1;padding:1rem;}textarea{height:400px;}@media(max-width: 450px){max-width:100%;label{font-size:1.6rem;max-width:80px;}input,textarea{flex:2;max-width:235px;}}"}),c=Object(n.a)("input",{target:"ejn641k1",label:"InputSubmit"})({name:"k0ca4t",styles:"background-color:var(--naranja);width:100%;padding:1.5rem;text-align:center;color:white;font-size:1.8rem;border:none;font-family:'PT Sants',sans-serif;font-weight:700;&:hover{cursor:pointer;}"}),i=Object(n.a)("p",{target:"ejn641k0",label:"Error"})({name:"1v7qpt3",styles:"background-color:red;padding:1rem;font-family:'PT Sans',sans-serif;font-weight:700;font-size:1.4rem;color:#fff;text-align:center;text-transform:uppercase;margin:2rem 0"})},obQd:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/productos/[id]",function(){return r("G58V")}])}},[["obQd",1,2,3,5,0,4,6,7]]]);