_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"1Mxj":function(e,t,r){"use strict";r("q1tI");var n=r("AeFk");var a={name:"3goe6e",styles:"margin-top:5rem;text-align:center"};t.a=function(){return Object(n.b)("div",null,Object(n.b)("h1",{css:a},"No se puede mostrar"))}},G58V:function(e,t,r){"use strict";r.r(t);var n=r("rePB"),a=r("a3WO");var o=r("BsWD");function c(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=r("o0o1"),u=r.n(i),s=r("HaE+"),b=r("DZdY"),l=r("q1tI"),d=r.n(l),m=r("20a2"),p=r("iHBO"),f=r("1Mxj"),j=r("zgwX"),g=r("oWvv"),O=r.n(g),h=r("PSO/"),x=r("oJAI"),y=r("bIyw"),v=r("AeFk");function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=Object(b.a)("div",{target:"e1s4jho61",label:"ContenedorProducto"})({name:"bkbgmm",styles:"@media(min-width: 768px){display:grid;grid-template-columns:2fr 1fr;gap:2rem;}"}),S=Object(b.a)("p",{target:"e1s4jho60",label:"CreadorProducto"})({name:"1ptknkn",styles:"padding:.5rem 2rem;background-color:#DA552F;color:#fff;text-transform:uppercase;font-weight:bold;display:inline-block;text-align:center"}),E={name:"1azakc",styles:"text-align:center"},_={name:"5yl01g",styles:"margin-top:5rem"},A={name:"1efi8gv",styles:"font-weight:bold"},C={name:"1b2e6c8",styles:"border:1px solid #e1e1e1;padding:2rem"},I={name:"k82dzb",styles:"margin:2rem 0"},D={name:"craf4i",styles:"text-align:center;margin-top:5rem"};t.default=function(){var e=Object(m.useRouter)(),t=e.query.id,r=Object(l.useContext)(p.a),a=r.firebase,o=r.usuario,i=Object(l.useState)({}),b=i[0],g=i[1],w=Object(l.useState)(!1),N=w[0],z=w[1],F=Object(l.useState)({}),V=F[0],T=F[1],q=Object(l.useState)(!0),J=q[0],B=q[1],W=Object(l.useRef)(!0),X=b.comentarios,G=b.creado,H=b.descripcion,M=b.empresa,Q=b.nombre,R=b.url,U=b.imagenUrl,Y=b.votos,Z=b.creador,K=b.haVotado,L=b.imagePath;if(Object(l.useEffect)((function(){W.current&&(t&&J&&function(){var e=Object(s.a)(u.a.mark((function e(){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.db.collection("productos").doc(t);case 2:return r=e.sent,e.next=5,r.get();case 5:(n=e.sent).exists?(g(n.data()),B(!1),z(!1)):(B(!1),z(!0));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()());return function(){W.current=!1}}),[t,J]),0===Object.keys(b).length&&!N)return"Cargando...";var $=function(){var r=Object(s.a)(u.a.mark((function r(){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o){r.next=2;break}return r.abrupt("return",e.push("/login"));case 2:if(Z.id===o.uid){r.next=4;break}return r.abrupt("return",e.push("/"));case 4:return r.prev=4,r.next=7,a.db.collection("productos").doc(t).delete();case 7:return r.next=9,a.storage.ref("productos/".concat(L)).delete();case 9:e.push("/"),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(4),console.log(r.t0);case 15:case"end":return r.stop()}}),r,null,[[4,12]])})));return function(){return r.apply(this,arguments)}}();return Object(v.b)(j.a,null,Object(v.b)(d.a.Fragment,null,N?Object(v.b)(f.a,null):Object(v.b)("div",{className:"contenedor"},Object(v.b)("h1",{css:D},Q),Object(v.b)(P,null,Object(v.b)("div",null,Object(v.b)("p",null,"Publicado hace: ",O()(new Date(G),{locale:h.es})),Object(v.b)("p",null,"Por: ",Z.nombre," de ",M),Object(v.b)("img",{src:U,alt:"img"}),Object(v.b)("p",null,H),o&&Object(v.b)(d.a.Fragment,null,Object(v.b)("h2",null,"Agrega tu comentario"),Object(v.b)("form",{onSubmit:function(r){if(r.preventDefault(),!o)return e.push("/login");if(""!==V.mensaje.trim()){V.usuarioId=o.uid,V.usuarioNombre=o.displayName;var n=[].concat(c(X),[V]);a.db.collection("productos").doc(t).update({comentarios:n}),g(k(k({},b),{},{comentarios:n})),B(!0)}}},Object(v.b)(x.a,null,Object(v.b)("input",{type:"text",name:"mensaje",onChange:function(e){T(k(k({},V),{},Object(n.a)({},e.target.name,e.target.value)))}})),Object(v.b)(x.d,{type:"submit",value:"Agregar comentario"}))),Object(v.b)("h2",{css:I},"Comentarios"),0===X.length?"A\xfan no hay comentarios":Object(v.b)("ul",null,X.map((function(e,t){return Object(v.b)("li",{key:"".concat(e.usuarioId,"-").concat(t),css:C},Object(v.b)("p",null,Object(v.b)("span",{css:A},e.usuarioNombre," "),"comento:"),Object(v.b)("p",null,e.mensaje),function(e){if(Z.id===e)return!0}(e.usuarioId)&&Object(v.b)(S,null,"Es Creador"))})))),Object(v.b)("aside",null,Object(v.b)(y.a,{target:"_blank",bgColor:"true",href:R},"Visitar Url"),Object(v.b)("div",{css:_},Object(v.b)("p",{css:E},Y," votos"),o&&!function(e){return K.some((function(t){return t===e}))}(o.uid)&&Object(v.b)(y.a,{onClick:function(){if(!o)return e.push("/login");if(!K.includes(o.uid)){var r=Y+1,n=[].concat(c(K),[o.uid]);a.db.collection("productos").doc(t).update({votos:r,haVotado:n}),g(k(k({},b),{},{votos:r})),B(!0)}}},"Votar")))),!!o&&(Z.id===o.uid||void 0)&&Object(v.b)(y.a,{onClick:$},"Eliminar Producto"))))}},oJAI:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return i}));var n=r("DZdY");var a=Object(n.a)("form",{target:"ejn641k3",label:"Formulario"})({name:"1ul61nn",styles:"max-width:600px;width:95%;margin:5rem auto 0 auto;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:2rem;padding:2rem;}@media(max-width: 450px){min-width:300px;max-width:350px;margin-top:2rem;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:1.4rem;padding:2rem;max-width:360px;}}"}),o=Object(n.a)("div",{target:"ejn641k2",label:"Campo"})({name:"s3wco",styles:"margin-bottom:2rem;display:flex;align-items:center;label{flex:0 0 150px;font-size:1.1rem;}input,textarea{flex:1;padding:1rem;}textarea{height:400px;}@media(max-width: 450px){max-width:100%;label{font-size:1.6rem;max-width:80px;}input,textarea{flex:2;max-width:235px;}}"}),c=Object(n.a)("input",{target:"ejn641k1",label:"InputSubmit"})({name:"k0ca4t",styles:"background-color:var(--naranja);width:100%;padding:1.5rem;text-align:center;color:white;font-size:1.8rem;border:none;font-family:'PT Sants',sans-serif;font-weight:700;&:hover{cursor:pointer;}"}),i=Object(n.a)("p",{target:"ejn641k0",label:"Error"})({name:"1v7qpt3",styles:"background-color:red;padding:1rem;font-family:'PT Sans',sans-serif;font-weight:700;font-size:1.4rem;color:#fff;text-align:center;text-transform:uppercase;margin:2rem 0"})},obQd:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/productos/[id]",function(){return r("G58V")}])}},[["obQd",1,2,3,5,0,4,6,7]]]);